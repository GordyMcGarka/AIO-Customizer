[Cleanup1.0]
delete '/switch/.packages/AIO Customizer/ini/'
delete '/switch/.packages/AIO Customizer/json/'
delete '/switch/.packages/AIO Customizer/txt/'


[Backup]
move '/switch/.packages/AIO Customizer/ini/boot customization/config.ini' '/switch/.packages/AIO Customizer/configs backup/config1.ini'
move '/switch/.packages/AIO Customizer/ini/exosphere/config.ini' '/switch/.packages/AIO Customizer/configs backup/config2.ini'
move '/switch/.packages/AIO Customizer/ini/hekate customization/config.ini' '/switch/.packages/AIO Customizer/configs backup/config3.ini'
move '/switch/.packages/AIO Customizer/ini/music/config.ini' '/switch/.packages/AIO Customizer/configs backup/config4.ini'
move '/switch/.packages/AIO Customizer/ini/theme customization/config.ini' '/switch/.packages/AIO Customizer/configs backup/config5.ini'
move '/switch/.packages/AIO Customizer/ini/theme customization/colors options/config.ini' '/switch/.packages/AIO Customizer/configs backup/config5_1.ini'
move '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' '/switch/.packages/AIO Customizer/configs backup/config6.ini'


[Release Info]
download 'https://raw.githubusercontent.com/GordyMcGarka/AIO-Customizer/main/package.ini' '/switch/.packages/AIO Customizer/ini/updater&cleanup/'
ini_file '/switch/.packages/AIO Customizer/ini/updater&cleanup/package.ini'
set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Release Info' latest_version '{ini_file(Header,;version)}'
set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Assets Info' latest_version '{ini_file(Header,;assets_version)}'
delete '/switch/.packages/AIO Customizer/ini/updater&cleanup/package.ini'


[Version Match]
ini_file '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini'

exec 'Current Release' '/switch/.packages/AIO Customizer/ini/updater&cleanup/boot_package.ini'

exec 'Release Info' '/switch/.packages/AIO Customizer/ini/updater&cleanup/boot_package.ini'

'{ini_file(Auto Update,auto_update)}' '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Version Match' auto_update exec

json '{"null":"{ini_file(notification,updates_notification)}","{ini_file(Release Info,latest_version)}{ini_file(Release Info,current_version)}":"null","{ini_file(Release Info,current_version)}null":"null"}'
'{json({ini_file(Release Info,current_version)}{ini_file(Release Info,latest_version)})}' '{WARNING_SYMBOL} New update is available!' 24

json '{"{ini_file(Release Info,latest_version)}":"remove-ini-key","null":"null"}'
'{json({ini_file(Release Info,current_version)})}' '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Version Match' auto_update
 
json '{"Not availablenull":"null","null":"null","{local_ip}null":"{ini_file(notification,no_internet_access_notification)}"}'
'{json({local_ip}{ini_file(Release Info,latest_version)})}' '{WARNING_SYMBOL} Wifi is connected with no internet!' 22

json '{"Not available":"{ini_file(notification,wifi_off_notification)}","null":"null"}'
'{json({local_ip})}' '{WARNING_SYMBOL} Wifi is not connected!' 24

'{ini_file(Version Match,auto_update)}' Update '/switch/.packages/AIO Customizer/ini/updater&cleanup/boot_package.ini'


[Update]
ini_file '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini'
download https://api.github.com/repos/GordyMcGarka/Ultrahand-Customizer/releases?per_page=1 /config/ultrahand/downloads/aio-customizer-api.json
json_file /config/ultrahand/downloads/aio-customizer-api.json
notify-now 'Updating to {ini_file(Release Info,latest_version)} press {R} to stop' 22
download {json_file(0,assets,0,browser_download_url)} /config/ultrahand/downloads/aio-customizer.zip
unzip /config/ultrahand/downloads/aio-customizer.zip '/config/ultrahand/downloads/AIO Customizer/'
exec Backup
exec Cleanup1.0
move '/config/ultrahand/downloads/AIO Customizer/' /switch/.packages/
exec 'Configs Backup' '/switch/.packages/AIO Customizer/configs backup/boot_package.ini'
exec 'Current Release' '/switch/.packages/AIO Customizer/boot_package.ini'
exec 'Release Info' '/switch/.packages/AIO Customizer/boot_package.ini'
delete /config/ultrahand/downloads/*
notify-now 'Auto-updated to {ini_file(Release Info,latest_version)}' 24



[Firmware Release Info]
download https://raw.githubusercontent.com/GordyMcGarka/AIO-Customizer/main/RELEASE.ini /config/ultrahand/downloads/
ini_file /config/ultrahand/downloads/RELEASE.ini

set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Firmware Release Info' atmosphere '{ini_file(Release Info,atmosphere)}'

set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Firmware Release Info' hekate '{ini_file(Release Info,hekate)}'

set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Firmware Release Info' sys-patch '{ini_file(Release Info,sys-patch)}'

set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Firmware Release Info' firmware '{ini_file(Release Info,firmware)}'

delete /config/ultrahand/downloads/*
refresh



[Current Release]
ini_file '/switch/.packages/AIO Customizer/package.ini'
set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Release Info' current_version {ini_file(Header,;version)}