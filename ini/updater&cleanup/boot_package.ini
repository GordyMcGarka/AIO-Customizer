[Cleanup1.0]
delete '/switch/.packages/AIO Customizer/ini/'
delete '/switch/.packages/AIO Customizer/json/'
delete '/switch/.packages/AIO Customizer/txt/'


[Backup]
move '/switch/.packages/AIO Customizer/ini/boot customization/config.ini' '/switch/.packages/AIO Customizer/configs backup/config1.ini'
move '/switch/.packages/AIO Customizer/ini/exosphere/config.ini' '/switch/.packages/AIO Customizer/configs backup/config2.ini'
move '/switch/.packages/AIO Customizer/ini/hekate customization/config.ini' '/switch/.packages/AIO Customizer/configs backup/config3.ini'
move '/switch/.packages/AIO Customizer/ini/music/config.ini' '/switch/.packages/AIO Customizer/configs backup/config4.ini'
move '/switch/.packages/AIO Customizer/ini/theme customization/config.ini' '/switch/.packages/AIO Customizer/configs backup/config5.ini'
move '/switch/.packages/AIO Customizer/ini/theme customization/colors options/config.ini' '/switch/.packages/AIO Customizer/configs backup/config5_1.ini'
move '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' '/switch/.packages/AIO Customizer/configs backup/config6.ini'


[Release Info]
download 'https://raw.githubusercontent.com/GordyMcGarka/AIO-Customizer/main/package.ini' '/switch/.packages/AIO Customizer/ini/updater&cleanup/RELEASE.ini'
ini_file '/switch/.packages/AIO Customizer/ini/updater&cleanup/RELEASE.ini'
set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Release Info' latest_version '{ini_file(Header,;version)}'
set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Assets Info' latest_version '{ini_file(Header,;assets_version)}'
delete '/switch/.packages/AIO Customizer/ini/updater&cleanup/RELEASE.ini'


[Version Match]
exec 'Current Release' '/switch/.packages/AIO Customizer/boot_package.ini'
exec 'Release Info' '/switch/.packages/AIO Customizer/ini/updater&cleanup/boot_package.ini'
ini_file '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini'
set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Version Match' notification notify-now
set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Version Match' auto_update exec
remove-ini-key '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Version Match' wifi
set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/version_match_template_current.ini' 'Current Version' version 'remove-ini-key{ini_file(Release Info,current_version)}'
set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/version_match_template_current.ini' 'Current Version' auto_update 'remove-ini-key{ini_file(Release Info,current_version)}'
set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/version_match_template_current.ini' 'Current Version' wifi_status 'notify-nownull'
set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/version_match_template_latest.ini' 'Latest Version' version 'remove-ini-key{ini_file(Release Info,latest_version)}'
set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/version_match_template_latest.ini' 'Latest Version' auto_update 'remove-ini-key{ini_file(Release Info,latest_version)}'
set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/version_match_template_latest.ini' 'Latest Version' wifi_status 'notify-now{ini_file(Release Info,latest_version)}'
compare '/switch/.packages/AIO Customizer/ini/updater&cleanup/version_match_template_current.ini' '/switch/.packages/AIO Customizer/ini/updater&cleanup/version_match_template_latest.ini' '/switch/.packages/AIO Customizer/ini/updater&cleanup/version_match.ini'
'{ini_file(Auto Update,auto_update)}' '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Version Match' auto_update

ini_file '/switch/.packages/AIO Customizer/ini/updater&cleanup/version_match.ini'
'{slice({ini_file(Version Match,version)}, 0, 14)}' '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Version Match' notification
'{slice({ini_file(Version Match,auto_update)}, 0, 14)}' '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Version Match' auto_update
set-ini-val '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini' 'Version Match' wifi_status '{slice({ini_file(Version Match,wifi_status)}, 0, 10)}'


ini_file '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini'
'{ini_file(Version Match,notification)}' '{WARNING_SYMBOL} New update is available' 24
'{ini_file(Version Match,wifi_status)}' '{WARNING_SYMBOL} Wifi is not enabled' 24
'{ini_file(Version Match,auto_update)}' Update '/switch/.packages/AIO Customizer/ini/updater&cleanup/boot_package.ini'



[Update]
try:
ini_file '/switch/.packages/AIO Customizer/ini/updater&cleanup/config.ini'
download https://api.github.com/repos/GordyMcGarka/Ultrahand-Customizer/releases?per_page=1 /config/ultrahand/downloads/aio-customizer-api.json
json_file /config/ultrahand/downloads/aio-customizer-api.json
notify-now 'Updating to {ini_file(Release Info,latest_version)} press {R} to stop' 22
download {json_file(0,assets,0,browser_download_url)} /config/ultrahand/downloads/aio-customizer.zip
unzip /config/ultrahand/downloads/aio-customizer.zip '/config/ultrahand/downloads/AIO Customizer/'
exec Backup
exec Cleanup1.0
move '/config/ultrahand/downloads/AIO Customizer/' /switch/.packages/
exec 'Configs Backup' '/switch/.packages/AIO Customizer/configs backup/boot_package.ini'
exec 'Current Release' '/switch/.packages/AIO Customizer/boot_package.ini'
exec 'Release Info' '/switch/.packages/AIO Customizer/boot_package.ini'
delete /config/ultrahand/downloads/*
notify-now 'Auto-updated to {ini_file(Release Info,latest_version)}' 24
 
